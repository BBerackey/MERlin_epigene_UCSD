

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage &mdash; MERlin  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Analysis tasks" href="tasks.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> MERlin
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#input-specifications">Input specifications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#raw-images">Raw images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-organization">Data organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#codebook">Codebook</a></li>
<li class="toctree-l3"><a class="reference internal" href="#position-list">Position list</a></li>
<li class="toctree-l3"><a class="reference internal" href="#microscope-parameters">Microscope parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#executing-locally">Executing locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="#executing-with-snakemake-anticipated-december-2018">Executing with Snakemake (Anticipated December 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualizing-the-results">Visualizing the results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tasks.html">Analysis tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to MERlin</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MERlin</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="input-specifications">
<h2>Input specifications<a class="headerlink" href="#input-specifications" title="Permalink to this headline">¶</a></h2>
<div class="section" id="raw-images">
<h3>Raw images<a class="headerlink" href="#raw-images" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="data-organization">
<h3>Data organization<a class="headerlink" href="#data-organization" title="Permalink to this headline">¶</a></h3>
<p>The data organization file specifies which the images correspond to each readout. The data organization file is a csv file. The first row is a header with column names and each following row designates one readout. The information provided for each readout indicates where to find the corresponding images in the raw image data and how to find the corresponding fiducial image to align the images between rounds.</p>
<p>The columns in the data organization file are:</p>
<ul class="simple">
<li>channelName - The name of the data channel. For genes measured sequential, this can be set as the gene name.</li>
<li>readoutName - The name of the readout sequence used to measure this channel.</li>
<li>imageType - The base name for the image file that contains the images for this readout, for example, <code class="docutils literal notranslate"><span class="pre">Conventional_750_650_561_488_405</span></code></li>
<li>imageRegExp - A regular expression specifying how image file names are constructed for each field of view and each imaging round. The parameters used in the regular expression are <code class="docutils literal notranslate"><span class="pre">imageType</span></code>, <code class="docutils literal notranslate"><span class="pre">fov</span></code>, and <code class="docutils literal notranslate"><span class="pre">imagingRound</span></code>, for example: <code class="docutils literal notranslate"><span class="pre">(?P&lt;imageType&gt;[\w|-]+)_(?P&lt;fov&gt;[0-9]+)_(?P&lt;imagingRound&gt;[0-9]+)</span></code>. Here, <code class="docutils literal notranslate"><span class="pre">imageType</span></code> specifies the string indicated in the <code class="docutils literal notranslate"><span class="pre">imageType</span></code> column for the corresponding row, <code class="docutils literal notranslate"><span class="pre">imagingRound</span></code> specifies the designated <code class="docutils literal notranslate"><span class="pre">imagingRound</span></code> for the corresponding row, and <code class="docutils literal notranslate"><span class="pre">fov</span></code> is filled with all field of view indexes in the data set.</li>
<li>bitNumber - The bit number corresponding to this readout.</li>
<li>imagingRound - The round of imaging where this readout is measured, starting from zero.</li>
<li>color - The illumination color that is used to measure this readout.</li>
<li>frame - The zero indexed frame or frames in the image file where images corresponding to this readout can be found. For a single frame, a single integer can be provided. For multiple frames, the frames can be provided as a list as <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5,</span> <span class="pre">6]</span></code></li>
<li>zPos - The z position for each of the frames specified in the previous column. For only a single frame, the z position should be provided as a decimal number while for multiple frames a list should be provided as for frame.</li>
<li>fiducialImageType - The base name for the image file that contains the fiducial images for aligning images this readout, for example, <code class="docutils literal notranslate"><span class="pre">Conventional_750_650_561_488_405</span></code></li>
<li>fiducialRegExp - A regular expression specifying how file names are constructed for the fiducial image files. This regex follows the same format as <code class="docutils literal notranslate"><span class="pre">imageRegExp</span></code>.</li>
<li>fiducialImagingRound - The imaging round (zero indexed) corresponding to the fiducial images for aligning images for this readout.</li>
<li>fiducialFrame - The frame index in the fiducial image file where the fiducial frame can be found.</li>
<li>fiducialColor - The illumination color that is used to measure the fiducials.</li>
</ul>
</div>
<div class="section" id="codebook">
<h3>Codebook<a class="headerlink" href="#codebook" title="Permalink to this headline">¶</a></h3>
<p>The codebook specifies . Barcodes corresponding to blanks must have “blank” in their name.</p>
</div>
<div class="section" id="position-list">
<h3>Position list<a class="headerlink" href="#position-list" title="Permalink to this headline">¶</a></h3>
<p>The position list is a csv file containing a list of positions for each imaged region. The i’th row in the file should be coordinates of the i’th field of view. Each position is specified by the x position and the y position, separated by a comma.</p>
<p>This file is expected to contain ‘positions’ in the file name and should be present either in the raw data directory or the parent directory. Alternatively, the name of a position csv file that is located in POSITION_HOME can be provided.</p>
</div>
<div class="section" id="microscope-parameters">
<h3>Microscope parameters<a class="headerlink" href="#microscope-parameters" title="Permalink to this headline">¶</a></h3>
<p>Microscope parameters specify properties specific to the image acquisition. The microscope parameter file should be placed in the MICROSCOPE_PARAMETERS_HOME directory. The parameters that can be set are:</p>
<ul class="simple">
<li>microns_per_pixel - the number of microns corresponding to one pixel in the image.</li>
<li>flip_horizontal - flag indicating whether the images should be flipped horizontally in order to align with neighboring images.</li>
<li>flip_vertical - flag indicating whether the images should be flipped vertically in order to align with neighboring images.</li>
<li>transpose - flag indicating whether the images should be transposed in order to align with neighboring images.</li>
</ul>
</div>
</div>
<div class="section" id="executing-locally">
<h2>Executing locally<a class="headerlink" href="#executing-locally" title="Permalink to this headline">¶</a></h2>
<p>After installation, MERlin can be run from the command line with the input parameters specified, such as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>merlin -a test_analysis_parameters.json -m STORM5.json -o Culture_16bits.csv -c HAEC1E1.csv -n 5 testdata
</pre></div>
</div>
<p>Here the MERFISH images contained in the directory <cite>%DATA_HOME%/testdata/</cite> are processed using the analysis tasks listed in <cite>test_analysis_parameters.json</cite> with microscope parameters <cite>STORM5.json</cite>, data organization <cite>Culture_16bits.csv</cite>, codebook <cite>HAEC1E1</cite> using 5 cores for each process.</p>
</div>
<div class="section" id="executing-with-snakemake-anticipated-december-2018">
<h2>Executing with Snakemake (Anticipated December 2018)<a class="headerlink" href="#executing-with-snakemake-anticipated-december-2018" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://snakemake.readthedocs.io/en/stable/">Snakemake</a> is a workflow management system that enables scalable analysis across a wide range of platforms. MERlin can generate a Snakemake workflow that can then be executed using Snakemake.</p>
</div>
<div class="section" id="visualizing-the-results">
<h2>Visualizing the results<a class="headerlink" href="#visualizing-the-results" title="Permalink to this headline">¶</a></h2>
<p>The MERlin analysis results can be explored using MERlinView. The analysis of the data set test_data can be explored with MERlinView from the command line as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>merlinview -d test_data
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tasks.html" class="btn btn-neutral float-right" title="Analysis tasks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, George Emanuel

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>